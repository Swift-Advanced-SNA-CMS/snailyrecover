<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SnailyCAD Recovery Documentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
    <style>
        .copy-btn {
            opacity: 0;
            transition: opacity 0.2s;
        }
        .code-block:hover .copy-btn {
            opacity: 1;
        }
        .code-block {
            position: relative;
        }
        
        .tab-button.active {
            background-color: rgb(59 130 246);
            color: white;
        }
        
        .scrollspy-active {
            background-color: rgb(59 130 246 / 0.1);
            border-left: 3px solid rgb(59 130 246);
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100">
    <!-- Navigation -->
    <nav class="bg-gray-800 border-b border-gray-700 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-xl font-semibold text-white">SnailyCAD Recovery Documentation</h1>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <button onclick="showPage('shell')" id="shell-tab" class="tab-button px-4 py-2 rounded-md text-sm font-medium bg-blue-600 text-white">
                        Shell Script (.sh)
                    </button>
                    <button onclick="showPage('batch')" id="batch-tab" class="tab-button px-4 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-700">
                        Batch Script (.bat)
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="flex">
        <!-- Sidebar -->
        <aside class="w-64 bg-gray-800 border-r border-gray-700 h-screen sticky top-16 overflow-y-auto">
            <nav class="mt-5 px-2">
                <div class="space-y-1">
                    <a href="#overview" class="sidebar-link text-gray-300 hover:bg-gray-700 hover:text-white group flex items-center px-2 py-2 text-sm font-medium rounded-md">
                        Overview
                    </a>
                    <a href="#prerequisites" class="sidebar-link text-gray-300 hover:bg-gray-700 hover:text-white group flex items-center px-2 py-2 text-sm font-medium rounded-md">
                        Prerequisites
                    </a>
                    <a href="#installation" class="sidebar-link text-gray-300 hover:bg-gray-700 hover:text-white group flex items-center px-2 py-2 text-sm font-medium rounded-md">
                        Installation
                    </a>
                    <a href="#usage" class="sidebar-link text-gray-300 hover:bg-gray-700 hover:text-white group flex items-center px-2 py-2 text-sm font-medium rounded-md">
                        Usage Guide
                    </a>
                    <a href="#functions" class="sidebar-link text-gray-300 hover:bg-gray-700 hover:text-white group flex items-center px-2 py-2 text-sm font-medium rounded-md">
                        Functions
                    </a>
                    <a href="#commands" class="sidebar-link text-gray-300 hover:bg-gray-700 hover:text-white group flex items-center px-2 py-2 text-sm font-medium rounded-md">
                        Commands
                    </a>
                    <a href="#troubleshooting" class="sidebar-link text-gray-300 hover:bg-gray-700 hover:text-white group flex items-center px-2 py-2 text-sm font-medium rounded-md">
                        Troubleshooting
                    </a>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 px-4 py-6 lg:px-8">
            <!-- Shell Script Documentation -->
            <div id="shell-content" class="max-w-7xl mx-auto">
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-white mb-4">SnailyCAD Recovery - Shell Script (.sh)</h1>
                    <p class="text-gray-300 text-lg">Complete administration tool for Unix/Linux/macOS systems</p>
                </div>

                <!-- Overview -->
                <section id="overview" class="mb-12">
                    <h2 class="text-2xl font-semibold text-white mb-4">Overview</h2>
                    <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                        <p class="text-gray-300 mb-4">
                            The <code class="bg-gray-700 px-2 py-1 rounded text-blue-300">full-snailycad-recovery.sh</code> script is a comprehensive administration tool for SnailyCAD instances running on Unix-like systems. It provides database management capabilities, user administration, and system maintenance functions.
                        </p>
                        <div class="bg-blue-900/50 border border-blue-700 p-4 rounded-lg">
                            <h4 class="text-blue-300 font-semibold mb-2">Key Features:</h4>
                            <ul class="text-gray-300 space-y-1">
                                <li>‚Ä¢ Automatic PostgreSQL detection</li>
                                <li>‚Ä¢ User management and password reset</li>
                                <li>‚Ä¢ Discord ID unlinking</li>
                                <li>‚Ä¢ CAD whitelist management</li>
                                <li>‚Ä¢ Feature toggle controls</li>
                                <li>‚Ä¢ Database maintenance operations</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Prerequisites -->
                <section id="prerequisites" class="mb-12">
                    <h2 class="text-2xl font-semibold text-white mb-4">Prerequisites</h2>
                    <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="text-white font-semibold mb-3">System Requirements</h4>
                                <ul class="text-gray-300 space-y-2">
                                    <li>‚Ä¢ Unix/Linux/macOS system</li>
                                    <li>‚Ä¢ Bash shell (version 4.0+)</li>
                                    <li>‚Ä¢ PostgreSQL client tools</li>
                                    <li>‚Ä¢ Network access to database</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="text-white font-semibold mb-3">Database Access</h4>
                                <ul class="text-gray-300 space-y-2">
                                    <li>‚Ä¢ Database credentials</li>
                                    <li>‚Ä¢ Administrative privileges</li>
                                    <li>‚Ä¢ Network connectivity</li>
                                    <li>‚Ä¢ Firewall permissions</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Installation -->
                <section id="installation" class="mb-12">
                    <h2 class="text-2xl font-semibold text-white mb-4">Installation</h2>
                    
                    <div class="space-y-6">
                        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                            <h3 class="text-xl font-semibold text-white mb-4">Step 1: Download the Script</h3>
                            <div class="code-block">
                                <div class="bg-gray-900 rounded-lg p-4 relative">
                                    <pre class="text-green-400 text-sm overflow-x-auto"><code># Download the script
wget https://github.com/EWANZO101/newdocs/raw/main/caddownloads/full-snailycad-recovery.sh

# Or using curl
curl -O https://github.com/EWANZO101/newdocs/raw/main/caddownloads/full-snailycad-recovery.sh</code></pre>
                                    <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                        Copy
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                            <h3 class="text-xl font-semibold text-white mb-4">Step 2: Make Executable</h3>
                            <div class="code-block">
                                <div class="bg-gray-900 rounded-lg p-4 relative">
                                    <pre class="text-green-400 text-sm overflow-x-auto"><code>chmod +x full-snailycad-recovery.sh</code></pre>
                                    <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                        Copy
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                            <h3 class="text-xl font-semibold text-white mb-4">Step 3: Run the Script</h3>
                            <div class="code-block">
                                <div class="bg-gray-900 rounded-lg p-4 relative">
                                    <pre class="text-green-400 text-sm overflow-x-auto"><code>./full-snailycad-recovery.sh</code></pre>
                                    <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                        Copy
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Usage Guide -->
                <section id="usage" class="mb-12">
                    <h2 class="text-2xl font-semibold text-white mb-4">Usage Guide</h2>
                    <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                        <div class="space-y-4">
                            <p class="text-gray-300">When you run the script, it will:</p>
                            <ol class="text-gray-300 space-y-2 list-decimal list-inside">
                                <li>Automatically detect your PostgreSQL installation</li>
                                <li>Prompt for database connection details</li>
                                <li>Test the database connection</li>
                                <li>Display the main administration menu</li>
                            </ol>
                            
                            <div class="bg-yellow-900/50 border border-yellow-700 p-4 rounded-lg mt-4">
                                <h4 class="text-yellow-300 font-semibold mb-2">‚ö†Ô∏è Security Note:</h4>
                                <p class="text-gray-300">Passwords are temporarily stored in memory and cleared on exit. Avoid running as root unless necessary.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Functions -->
                <section id="functions" class="mb-12">
                    <h2 class="text-2xl font-semibold text-white mb-4">Available Functions</h2>
                    
                    <div class="grid grid-cols-1 gap-6">
                        <!-- Function 1 -->
                        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                            <h3 class="text-lg font-semibold text-white mb-3">1. List All Users</h3>
                            <p class="text-gray-300 mb-4">Display all users in the database with their IDs, usernames, and Discord IDs.</p>
                            <div class="code-block">
                                <div class="bg-gray-900 rounded-lg p-4 relative">
                                    <pre class="text-blue-400 text-sm overflow-x-auto"><code>SELECT row_number() OVER () AS num, id, username, "discordId" 
FROM public."User" 
ORDER BY username;</code></pre>
                                    <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                        Copy
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Function 2 -->
                        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                            <h3 class="text-lg font-semibold text-white mb-3">2. Unlink Discord ID</h3>
                            <p class="text-gray-300 mb-4">Remove Discord ID association from users to allow standard login.</p>
                            <div class="space-y-3">
                                <div class="text-sm text-gray-400">Search for user:</div>
                                <div class="code-block">
                                    <div class="bg-gray-900 rounded-lg p-4 relative">
                                        <pre class="text-blue-400 text-sm overflow-x-auto"><code>SELECT id, username, "discordId" 
FROM public."User" 
WHERE "discordId" = 'DISCORD_ID_HERE';</code></pre>
                                        <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                            Copy
                                        </button>
                                    </div>
                                </div>
                                <div class="text-sm text-gray-400">Unlink Discord ID:</div>
                                <div class="code-block">
                                    <div class="bg-gray-900 rounded-lg p-4 relative">
                                        <pre class="text-blue-400 text-sm overflow-x-auto"><code>UPDATE public."User" 
SET "discordId" = NULL 
WHERE "discordId" = 'DISCORD_ID_HERE';</code></pre>
                                        <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                            Copy
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Function 3 -->
                        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                            <h3 class="text-lg font-semibold text-white mb-3">3. Update CAD Whitelist</h3>
                            <p class="text-gray-300 mb-4">Disable whitelist requirements for all CAD instances.</p>
                            <div class="code-block">
                                <div class="bg-gray-900 rounded-lg p-4 relative">
                                    <pre class="text-blue-400 text-sm overflow-x-auto"><code>UPDATE public."cad" SET whitelisted = false;</code></pre>
                                    <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                        Copy
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Function 4 -->
                        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                            <h3 class="text-lg font-semibold text-white mb-3">4. Update CadFeature Settings</h3>
                            <p class="text-gray-300 mb-4">Manage authentication features like regular login, Steam OAuth, and Discord authentication.</p>
                            
                            <div class="space-y-4">
                                <div class="text-sm text-gray-400">Available features:</div>
                                <ul class="text-gray-300 space-y-1 list-disc list-inside">
                                    <li>ALLOW_REGULAR_LOGIN - Enable/disable username/password login</li>
                                    <li>STEAM_OAUTH - Enable/disable Steam authentication</li>
                                    <li>DISCORD_AUTH - Enable/disable Discord authentication</li>
                                </ul>
                                
                                <div class="text-sm text-gray-400">Check current status:</div>
                                <div class="code-block">
                                    <div class="bg-gray-900 rounded-lg p-4 relative">
                                        <pre class="text-blue-400 text-sm overflow-x-auto"><code>SELECT feature, "isEnabled" 
FROM public."CadFeature" 
ORDER BY feature;</code></pre>
                                        <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                            Copy
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="text-sm text-gray-400">Update feature (replace FEATURE_NAME and true/false):</div>
                                <div class="code-block">
                                    <div class="bg-gray-900 rounded-lg p-4 relative">
                                        <pre class="text-blue-400 text-sm overflow-x-auto"><code>UPDATE public."CadFeature" 
SET "isEnabled" = true 
WHERE feature = 'ALLOW_REGULAR_LOGIN';</code></pre>
                                        <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                            Copy
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Function 5 -->
                        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                            <h3 class="text-lg font-semibold text-white mb-3">5. Reset User Password</h3>
                            <p class="text-gray-300 mb-4">Reset user passwords using encrypted storage.</p>
                            
                            <div class="space-y-3">
                                <div class="text-sm text-gray-400">Ensure pgcrypto extension:</div>
                                <div class="code-block">
                                    <div class="bg-gray-900 rounded-lg p-4 relative">
                                        <pre class="text-blue-400 text-sm overflow-x-auto"><code>CREATE EXTENSION IF NOT EXISTS pgcrypto;</code></pre>
                                        <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                            Copy
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="text-sm text-gray-400">List users with numbers:</div>
                                <div class="code-block">
                                    <div class="bg-gray-900 rounded-lg p-4 relative">
                                        <pre class="text-blue-400 text-sm overflow-x-auto"><code>SELECT row_number() OVER () AS num, username, id 
FROM public."User" 
WHERE username IS NOT NULL 
ORDER BY username;</code></pre>
                                        <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                            Copy
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="text-sm text-gray-400">Reset password (replace USER_NUMBER and NEW_PASSWORD):</div>
                                <div class="code-block">
                                    <div class="bg-gray-900 rounded-lg p-4 relative">
                                        <pre class="text-blue-400 text-sm overflow-x-auto"><code>UPDATE public."User" 
SET password = crypt('NEW_PASSWORD', gen_salt('bf')) 
WHERE username = (
    SELECT username FROM (
        SELECT row_number() OVER () AS num, username 
        FROM public."User" 
        WHERE username IS NOT NULL 
        ORDER BY username
    ) t WHERE num = USER_NUMBER
);</code></pre>
                                        <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                            Copy
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Function 6 -->
                        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                            <h3 class="text-lg font-semibold text-white mb-3">6. Maintenance Operations</h3>
                            <p class="text-gray-300 mb-4">Database maintenance and optimization commands.</p>
                            
                            <div class="space-y-4">
                                <div class="text-sm text-gray-400">Vacuum database:</div>
                                <div class="code-block">
                                    <div class="bg-gray-900 rounded-lg p-4 relative">
                                        <pre class="text-blue-400 text-sm overflow-x-auto"><code>VACUUM ANALYZE;</code></pre>
                                        <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                            Copy
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="text-sm text-gray-400">Update statistics:</div>
                                <div class="code-block">
                                    <div class="bg-gray-900 rounded-lg p-4 relative">
                                        <pre class="text-blue-400 text-sm overflow-x-auto"><code>ANALYZE;</code></pre>
                                        <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                            Copy
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="text-sm text-gray-400">Check database size:</div>
                                <div class="code-block">
                                    <div class="bg-gray-900 rounded-lg p-4 relative">
                                        <pre class="text-blue-400 text-sm overflow-x-auto"><code>SELECT pg_size_pretty(pg_database_size('DATABASE_NAME')) as database_size;</code></pre>
                                        <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                            Copy
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="text-sm text-gray-400">Show active connections:</div>
                                <div class="code-block">
                                    <div class="bg-gray-900 rounded-lg p-4 relative">
                                        <pre class="text-blue-400 text-sm overflow-x-auto"><code>SELECT pid, usename, application_name, client_addr, state, query_start 
FROM pg_stat_activity 
WHERE state = 'active';</code></pre>
                                        <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                            Copy
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Commands -->
                <section id="commands" class="mb-12">
                    <h2 class="text-2xl font-semibold text-white mb-4">Manual Commands</h2>
                    
                    <div class="space-y-6">
                        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                            <h3 class="text-lg font-semibold text-white mb-3">PostgreSQL Connection</h3>
                            <div class="code-block">
                                <div class="bg-gray-900 rounded-lg p-4 relative">
                                    <pre class="text-green-400 text-sm overflow-x-auto"><code># Connect to PostgreSQL
psql -U username -d database_name -h hostname -p port

# Example
psql -U postgres -d snaily-cad-v4 -h localhost -p 5432</code></pre>
                                    <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                        Copy
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                            <h3 class="text-lg font-semibold text-white mb-3">Script Permissions</h3>
                            <div class="code-block">
                                <div class="bg-gray-900 rounded-lg p-4 relative">
                                    <pre class="text-green-400 text-sm overflow-x-auto"><code># Make script executable
chmod +x full-snailycad-recovery.sh

# Run script
./full-snailycad-recovery.sh

# Run with bash explicitly
bash full-snailycad-recovery.sh</code></pre>
                                    <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                        Copy
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Troubleshooting -->
                <section id="troubleshooting" class="mb-12">
                    <h2 class="text-2xl font-semibold text-white mb-4">Troubleshooting</h2>
                    
                    <div class="space-y-6">
                        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                            <h3 class="text-lg font-semibold text-white mb-3">Common Issues</h3>
                            
                            <div class="space-y-4">
                                <div class="bg-red-900/50 border border-red-700 p-4 rounded-lg">
                                    <h4 class="text-red-300 font-semibold mb-2">PostgreSQL Not Found</h4>
                                    <p class="text-gray-300 mb-2">If the script can't find PostgreSQL:</p>
                                    <div class="code-block">
                                        <div class="bg-gray-900 rounded-lg p-4 relative">
                                            <pre class="text-green-400 text-sm overflow-x-auto"><code># Find PostgreSQL installation
which psql
find /usr -name "psql" 2>/dev/null
find /opt -name "psql" 2>/dev/null

# Common locations:
/usr/bin/psql
/usr/local/bin/psql
/opt/postgresql/bin/psql</code></pre>
                                            <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                                Copy
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-yellow-900/50 border border-yellow-700 p-4 rounded-lg">
                                    <h4 class="text-yellow-300 font-semibold mb-2">Connection Failed</h4>
                                    <p class="text-gray-300 mb-2">Check database connection:</p>
                                    <div class="code-block">
                                        <div class="bg-gray-900 rounded-lg p-4 relative">
                                            <pre class="text-green-400 text-sm overflow-x-auto"><code># Test connection manually
psql -U username -d database -h host -p port -c "SELECT 1;"

# Check if PostgreSQL is running
sudo systemctl status postgresql
sudo service postgresql status</code></pre>
                                            <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                                Copy
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-blue-900/50 border border-blue-700 p-4 rounded-lg">
                                    <h4 class="text-blue-300 font-semibold mb-2">Permission Denied</h4>
                                    <p class="text-gray-300 mb-2">Fix script permissions:</p>
                                    <div class="code-block">
                                        <div class="bg-gray-900 rounded-lg p-4 relative">
                                            <pre class="text-green-400 text-sm overflow-x-auto"><code># Make script executable
chmod +x full-snailycad-recovery.sh

# Check current permissions
ls -la full-snailycad-recovery.sh</code></pre>
                                            <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                                Copy
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Batch Script Documentation -->
            <div id="batch-content" class="max-w-7xl mx-auto" style="display: none;">
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-white mb-4">SnailyCAD Recovery - Batch Script (.bat)</h1>
                    <p class="text-gray-300 text-lg">Complete administration tool for Windows systems</p>
                </div>

                <!-- Overview -->
                <section class="mb-12">
                    <h2 class="text-2xl font-semibold text-white mb-4">Overview</h2>
                    <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                        <p class="text-gray-300 mb-4">
                            The <code class="bg-gray-700 px-2 py-1 rounded text-blue-300">recover.bat</code> script is a Windows batch file that provides the same functionality as the shell script for Windows environments.
                        </p>
                        <div class="bg-blue-900/50 border border-blue-700 p-4 rounded-lg">
                            <h4 class="text-blue-300 font-semibold mb-2">Key Features:</h4>
                            <ul class="text-gray-300 space-y-1">
                                <li>‚Ä¢ Automatic PostgreSQL version detection</li>
                                <li>‚Ä¢ Windows-native command prompt interface</li>
                                <li>‚Ä¢ Same database management capabilities</li>
                                <li>‚Ä¢ Error handling and validation</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Prerequisites -->
                <section class="mb-12">
                    <h2 class="text-2xl font-semibold text-white mb-4">Prerequisites</h2>
                    <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="text-white font-semibold mb-3">System Requirements</h4>
                                <ul class="text-gray-300 space-y-2">
                                    <li>‚Ä¢ Windows 10/11 or Windows Server</li>
                                    <li>‚Ä¢ Command Prompt or PowerShell</li>
                                    <li>‚Ä¢ PostgreSQL installed locally</li>
                                    <li>‚Ä¢ Administrator privileges (recommended)</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="text-white font-semibold mb-3">PostgreSQL Installation</h4>
                                <ul class="text-gray-300 space-y-2">
                                    <li>‚Ä¢ PostgreSQL 10+ installed</li>
                                    <li>‚Ä¢ psql.exe accessible</li>
                                    <li>‚Ä¢ Database credentials available</li>
                                    <li>‚Ä¢ Network connectivity to database</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Installation -->
                <section class="mb-12">
                    <h2 class="text-2xl font-semibold text-white mb-4">Installation & Usage</h2>
                    
                    <div class="space-y-6">
                        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                            <h3 class="text-xl font-semibold text-white mb-4">Step 1: Download the Script</h3>
                            <div class="code-block">
                                <div class="bg-gray-900 rounded-lg p-4 relative">
                                    <pre class="text-green-400 text-sm overflow-x-auto"><code>REM Download using PowerShell
powershell -Command "Invoke-WebRequest -Uri 'https://github.com/EWANZO101/newdocs/raw/main/caddownloads/recover.bat' -OutFile 'recover.bat'"

REM Or download manually from the browser and save as recover.bat</code></pre>
                                    <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                        Copy
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                            <h3 class="text-xl font-semibold text-white mb-4">Step 2: Run as Administrator</h3>
                            <div class="code-block">
                                <div class="bg-gray-900 rounded-lg p-4 relative">
                                    <pre class="text-green-400 text-sm overflow-x-auto"><code>REM Right-click on Command Prompt and select "Run as administrator"
REM Navigate to the directory containing recover.bat
cd C:\path\to\script

REM Run the script
recover.bat</code></pre>
                                    <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                        Copy
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                            <h3 class="text-xl font-semibold text-white mb-4">Step 3: PostgreSQL Detection</h3>
                            <p class="text-gray-300 mb-4">The script automatically checks for PostgreSQL installations in standard locations:</p>
                            <div class="code-block">
                                <div class="bg-gray-900 rounded-lg p-4 relative">
                                    <pre class="text-blue-400 text-sm overflow-x-auto"><code>C:\Program Files\PostgreSQL\16\bin\psql.exe
C:\Program Files\PostgreSQL\15\bin\psql.exe
C:\Program Files\PostgreSQL\14\bin\psql.exe
C:\Program Files\PostgreSQL\13\bin\psql.exe
C:\Program Files\PostgreSQL\12\bin\psql.exe
C:\Program Files\PostgreSQL\11\bin\psql.exe
C:\Program Files\PostgreSQL\10\bin\psql.exe</code></pre>
                                    <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                        Copy
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Functions (Same as Shell but Windows-specific) -->
                <section class="mb-12">
                    <h2 class="text-2xl font-semibold text-white mb-4">Available Functions</h2>
                    
                    <div class="bg-yellow-900/50 border border-yellow-700 p-4 rounded-lg mb-6">
                        <h4 class="text-yellow-300 font-semibold mb-2">üìù Note:</h4>
                        <p class="text-gray-300">The Windows batch script provides the same functionality as the shell script. All SQL commands and database operations are identical.</p>
                    </div>

                    <div class="grid grid-cols-1 gap-6">
                        <!-- Windows-specific command examples -->
                        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                            <h3 class="text-lg font-semibold text-white mb-3">Manual PostgreSQL Connection (Windows)</h3>
                            <div class="code-block">
                                <div class="bg-gray-900 rounded-lg p-4 relative">
                                    <pre class="text-green-400 text-sm overflow-x-auto"><code>REM Connect using full path
"C:\Program Files\PostgreSQL\15\bin\psql.exe" -U postgres -d snaily-cad-v4 -h localhost -p 5432

REM Set environment variable for password
set PGPASSWORD=your_password
"C:\Program Files\PostgreSQL\15\bin\psql.exe" -U postgres -d snaily-cad-v4 -h localhost -p 5432</code></pre>
                                    <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                        Copy
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                            <h3 class="text-lg font-semibold text-white mb-3">Check PostgreSQL Service (Windows)</h3>
                            <div class="code-block">
                                <div class="bg-gray-900 rounded-lg p-4 relative">
                                    <pre class="text-green-400 text-sm overflow-x-auto"><code>REM Check if PostgreSQL service is running
sc query postgresql-x64-15

REM Start PostgreSQL service
net start postgresql-x64-15

REM Stop PostgreSQL service
net stop postgresql-x64-15</code></pre>
                                    <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                        Copy
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                            <h3 class="text-lg font-semibold text-white mb-3">Find PostgreSQL Installation</h3>
                            <div class="code-block">
                                <div class="bg-gray-900 rounded-lg p-4 relative">
                                    <pre class="text-green-400 text-sm overflow-x-auto"><code>REM Find PostgreSQL installation directory
dir "C:\Program Files\PostgreSQL\" /AD

REM Check if psql exists
dir "C:\Program Files\PostgreSQL\*\bin\psql.exe" /S

REM Add PostgreSQL to PATH temporarily
set PATH=%PATH%;C:\Program Files\PostgreSQL\15\bin</code></pre>
                                    <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                        Copy
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Windows-specific Troubleshooting -->
                <section class="mb-12">
                    <h2 class="text-2xl font-semibold text-white mb-4">Windows-Specific Troubleshooting</h2>
                    
                    <div class="space-y-6">
                        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                            <h3 class="text-lg font-semibold text-white mb-3">Common Windows Issues</h3>
                            
                            <div class="space-y-4">
                                <div class="bg-red-900/50 border border-red-700 p-4 rounded-lg">
                                    <h4 class="text-red-300 font-semibold mb-2">Script Won't Run</h4>
                                    <p class="text-gray-300 mb-2">If the batch file doesn't execute:</p>
                                    <div class="code-block">
                                        <div class="bg-gray-900 rounded-lg p-4 relative">
                                            <pre class="text-green-400 text-sm overflow-x-auto"><code>REM Check execution policy (if using PowerShell)
Get-ExecutionPolicy

REM Run from Command Prompt instead
cmd.exe
recover.bat

REM Check file association
assoc .bat</code></pre>
                                            <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                                Copy
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-yellow-900/50 border border-yellow-700 p-4 rounded-lg">
                                    <h4 class="text-yellow-300 font-semibold mb-2">PostgreSQL Not Found</h4>
                                    <p class="text-gray-300 mb-2">If PostgreSQL detection fails:</p>
                                    <div class="code-block">
                                        <div class="bg-gray-900 rounded-lg p-4 relative">
                                            <pre class="text-green-400 text-sm overflow-x-auto"><code>REM Check installed programs
wmic product where "name like '%PostgreSQL%'" get name,version

REM Look for psql in different locations
where psql
where /R "C:\Program Files" psql.exe

REM Manually specify version when prompted
REM Enter version number (10-16) when asked</code></pre>
                                            <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                                Copy
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-blue-900/50 border border-blue-700 p-4 rounded-lg">
                                    <h4 class="text-blue-300 font-semibold mb-2">Permission Issues</h4>
                                    <p class="text-gray-300 mb-2">For database permission errors:</p>
                                    <div class="code-block">
                                        <div class="bg-gray-900 rounded-lg p-4 relative">
                                            <pre class="text-green-400 text-sm overflow-x-auto"><code>REM Run Command Prompt as Administrator
REM Right-click Start Menu > Windows Terminal (Admin)

REM Check current user permissions
whoami /priv

REM Check PostgreSQL service account
sc qc postgresql-x64-15</code></pre>
                                            <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                                Copy
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                            <h3 class="text-lg font-semibold text-white mb-3">Windows Environment Setup</h3>
                            <div class="code-block">
                                <div class="bg-gray-900 rounded-lg p-4 relative">
                                    <pre class="text-green-400 text-sm overflow-x-auto"><code>REM Set environment variables for PostgreSQL
set PGUSER=postgres
set PGPASSWORD=your_password
set PGHOST=localhost
set PGPORT=5432
set PGDATABASE=snaily-cad-v4

REM Verify connection
psql -c "SELECT version();"</code></pre>
                                    <button onclick="copyToClipboard(this.previousElementSibling.textContent)" class="copy-btn absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                        Copy
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script>
        // Tab switching functionality
        function showPage(page) {
            const shellContent = document.getElementById('shell-content');
            const batchContent = document.getElementById('batch-content');
            const shellTab = document.getElementById('shell-tab');
            const batchTab = document.getElementById('batch-tab');
            
            if (page === 'shell') {
                shellContent.style.display = 'block';
                batchContent.style.display = 'none';
                shellTab.classList.add('active', 'bg-blue-600', 'text-white');
                shellTab.classList.remove('text-gray-300', 'hover:text-white', 'hover:bg-gray-700');
                batchTab.classList.remove('active', 'bg-blue-600', 'text-white');
                batchTab.classList.add('text-gray-300', 'hover:text-white', 'hover:bg-gray-700');
            } else {
                shellContent.style.display = 'none';
                batchContent.style.display = 'block';
                batchTab.classList.add('active', 'bg-blue-600', 'text-white');
                batchTab.classList.remove('text-gray-300', 'hover:text-white', 'hover:bg-gray-700');
                shellTab.classList.remove('active', 'bg-blue-600', 'text-white');
                shellTab.classList.add('text-gray-300', 'hover:text-white', 'hover:bg-gray-700');
            }
        }

        // Copy to clipboard functionality
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text.trim()).then(function() {
                // Show success feedback
                const toast = document.createElement('div');
                toast.className = 'fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg z-50';
                toast.textContent = 'Copied to clipboard!';
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.remove();
                }, 2000);
            }).catch(function(err) {
                console.error('Could not copy text: ', err);
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = text.trim();
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    const toast = document.createElement('div');
                    toast.className = 'fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg z-50';
                    toast.textContent = 'Copied to clipboard!';
                    document.body.appendChild(toast);
                    
                    setTimeout(() => {
                        toast.remove();
                    }, 2000);
                } catch (err) {
                    console.error('Fallback copy failed: ', err);
                }
                document.body.removeChild(textArea);
            });
        }

        // Sidebar navigation
        document.addEventListener('DOMContentLoaded', function() {
            const links = document.querySelectorAll('.sidebar-link');
            
            links.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });

            // Scrollspy functionality
            function updateScrollspy() {
                const sections = document.querySelectorAll('section[id]');
                const scrollPosition = window.scrollY + 100;

                sections.forEach(section => {
                    const top = section.offsetTop;
                    const bottom = top + section.offsetHeight;
                    const link = document.querySelector(`.sidebar-link[href="#${section.id}"]`);
                    
                    if (link) {
                        if (scrollPosition >= top && scrollPosition < bottom) {
                            link.classList.add('scrollspy-active');
                        } else {
                            link.classList.remove('scrollspy-active');
                        }
                    }
                });
            }

            window.addEventListener('scroll', updateScrollspy);
            updateScrollspy(); // Initial call
        });
    </script>
</body>
</html>
